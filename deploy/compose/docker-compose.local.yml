# Local development/testing override:
# - Builds images from the local source instead of pulling from GHCR.
#
# Usage:
#   docker compose --env-file deploy/compose/.env \
#     -f deploy/compose/docker-compose.yml \
#     -f deploy/compose/docker-compose.local.yml \
#     up -d --build

services:
  app:
    image: syllogic-frontend:local
    pull_policy: never
    build:
      context: ../../frontend
      dockerfile: Dockerfile

  migrate:
    # Use the locally-built frontend image
    image: syllogic-frontend:local
    pull_policy: never

  backend:
    image: syllogic-backend:local
    pull_policy: never
    build:
      context: ../../backend
      dockerfile: Dockerfile

  mcp:
    # Use the locally-built backend image
    image: syllogic-backend:local
    pull_policy: never

  worker:
    # Use the locally-built backend image
    image: syllogic-backend:local
    pull_policy: never

  beat:
    # Use the locally-built backend image
    image: syllogic-backend:local
    pull_policy: never
